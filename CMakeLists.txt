cmake_minimum_required(VERSION 3.10)
project(blender-draco-exporter)
set(CMAKE_POSITION_INDEPENDENT_CODE ON)
set(CMAKE_CXX_STANDARD 14)

# Build Draco.
add_subdirectory(draco)

# Build blender-draco-exporter DLL.
add_library(${PROJECT_NAME} SHARED src/draco-compressor.cpp)

target_include_directories(${PROJECT_NAME} PUBLIC
        draco/src

        # Inlcude "draco/draco_features.h", which is generated by CMake.
        ${CMAKE_CURRENT_BINARY_DIR}
        )

target_link_libraries(${PROJECT_NAME} PUBLIC draco)

# Required because we are building a DLL.
set_property(TARGET ${PROJECT_NAME} PROPERTY POSITION_INDEPENDENT_CODE ON)

# -------------------------------------------------------------------------------------------------------

#add_executable(${PROJECT_NAME}-main src/draco-exporter.cpp)
#target_include_directories(${PROJECT_NAME}-main PUBLIC ../draco/src ${CMAKE_CURRENT_BINARY_DIR})
#target_link_libraries(${PROJECT_NAME}-main PUBLIC draco)
